<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="2023 draft in progress Background primerAimThe Global Healthy and Sustinable City Indicators (global-indicators) software can be used to analyse and report on health related spatial indicators of urba">
<meta property="og:type" content="article">
<meta property="og:title" content="Global Healthy &amp; Sustinable City Indicators software">
<meta property="og:url" content="https://global-healthy-liveable-cities.github.io/2023/02/01/software/">
<meta property="og:site_name" content="Global Healthy &amp; Sustainable City Indicators">
<meta property="og:description" content="2023 draft in progress Background primerAimThe Global Healthy and Sustinable City Indicators (global-indicators) software can be used to analyse and report on health related spatial indicators of urba">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-01-31T13:00:00.000Z">
<meta property="article:modified_time" content="2023-02-07T23:44:13.975Z">
<meta property="article:author" content="GHSCIC">
<meta property="article:tag" content="accessibility urban-planning health transport public-health city city-government transportation-network urban public-transport urban-design">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-android-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-android-180x180.png">
        
      
    
    <!-- title -->
    <title>Global Healthy &amp; Sustinable City Indicators software</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 py4 ltr">
    
      <header id="header">
  <a href="/">
  
    
      <div id="logo" style="background-image: url(/images/GOHSC.png);"></div>
    
  
    <div id="title">
      <h1>Global Healthy &amp; Sustainable City Indicators</h1>
    </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#" aria-label="Menu"><i class="fas fa-bars fa-2x"></i></a>
      </li>
      <!--
     --><li><a href="/2023/02/01/1000cities/">1000 Cities Challenge</a></li><!--
   --><!--
     --><li><a href="/2023/02/01/indicators/">Indicators</a></li><!--
   --><!--
     --><li><a href="/2023/02/01/software/">Analysis and reporting</a></li><!--
   -->
    </ul>
  </div>
</header>

      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/02/01/indicators/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://global-healthy-liveable-cities.github.io/2023/02/01/software/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&text=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&is_video=false&description=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Global Healthy &amp; Sustinable City Indicators software&body=Check out this article: https://global-healthy-liveable-cities.github.io/2023/02/01/software/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&name=Global Healthy &amp; Sustinable City Indicators software&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&t=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Background-primer"><span class="toc-number">1.</span> <span class="toc-text">Background primer</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Aim"><span class="toc-number">1.1.</span> <span class="toc-text">Aim</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage-in-brief"><span class="toc-number">1.2.</span> <span class="toc-text">Usage in brief</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Configuration"><span class="toc-number">1.3.</span> <span class="toc-text">Configuration</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Software-installation"><span class="toc-number">2.</span> <span class="toc-text">Software installation</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Installation"><span class="toc-number">2.1.</span> <span class="toc-text">Installation</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0-Configuration"><span class="toc-number">3.</span> <span class="toc-text">0. Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Project"><span class="toc-number">3.1.</span> <span class="toc-text">Project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Regions"><span class="toc-number">3.2.</span> <span class="toc-text">Regions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Datasets"><span class="toc-number">3.3.</span> <span class="toc-text">Datasets</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Indicators"><span class="toc-number">3.4.</span> <span class="toc-text">Indicators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Policies"><span class="toc-number">3.5.</span> <span class="toc-text">Policies</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Set-up-study-regions"><span class="toc-number">4.</span> <span class="toc-text">1. Set up study regions</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Analyse-neighbourhoods"><span class="toc-number">5.</span> <span class="toc-text">2. Analyse neighbourhoods</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Aggregate-indicators"><span class="toc-number">6.</span> <span class="toc-text">3. Aggregate indicators</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Generate-reports"><span class="toc-number">7.</span> <span class="toc-text">4. Generate reports</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Validation"><span class="toc-number">8.</span> <span class="toc-text">Validation</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    

    
    <h1 class="posttitle" itemprop="name headline">
        Global Healthy &amp; Sustinable City Indicators software
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">GHSCI</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-01-31T13:00:00.000Z" itemprop="datePublished">2023-02-01</time>
        
      
    </div>


      

      

    </div>
  </header>
  <div class="content" itemprop="articleBody">
    <p><em>2023 draft in progress</em></p>
<h1 id="Background-primer"><a href="#Background-primer" class="headerlink" title="Background primer"></a>Background primer</h1><h2 id="Aim"><a href="#Aim" class="headerlink" title="Aim"></a>Aim</h2><p>The Global Healthy and Sustinable City Indicators (global-indicators) software can be used to analyse and report on health related spatial indicators of urban design and transport features for regions of interest in the world using open and&#x2F;or custom data; for example, the percentage of population with access to some feature of interest (e.g. a public open space larger than 1.5 hectares in size) within 500 metres, or a composite indicator of neighbourhood walkability.   It does this using spatial and network analyses for sample points generated along a derived pedestrian network.  Results are aggregated to a grid with resolution corresponding to the input population data used, as well as overall summaries for the city or region of interest.  It outputs data in geopackage and csv formats, as well as maps, plots and can be configured to produce city reports for publication in multiple languages.</p>
<h2 id="Usage-in-brief"><a href="#Usage-in-brief" class="headerlink" title="Usage in brief"></a>Usage in brief</h2><p>The software is run as a <a target="_blank" rel="noopener" href="https://www.w3schools.com/whatis/whatis_cli.asp">command line interface</a>.  In the future we would like to develop a graphical user interface option (e.g. run in a web browser), however our first priority was developing functionality for flexible analysis and reporting.</p>
<p>The global-indicators software is hosted in our <a target="_blank" rel="noopener" href="https://github.com/global-healthy-liveable-cities/global-indicators">Github repository</a>.  Technically the software can be downloaded directly, however we recommend the usage of Git to support <a target="_blank" rel="noopener" href="https://doi.org/10.1186/1751-0473-8-7">version control</a> of your own edited configuration files, and allow for easier retrieval of potential updates. To retrieve the software we recommend installation of <a target="_blank" rel="noopener" href="https://git-scm.com/">Git</a>. and <a target="_blank" rel="noopener" href="https://www.docker.com/">Docker</a> (to set up the required computational environment and software dependencies).  Please follow the platform specific directions to install this software on your system.  If using Windows, it is recommended to install Windows Subsystem for Linux (WSL2) before installation of Docker, as per <a target="_blank" rel="noopener" href="https://docs.docker.com/desktop/windows/wsl/">https://docs.docker.com/desktop/windows/wsl/</a>.  </p>
<p>The software is coded using Python, a popular programming language for scientific computing.  However, you don’t need to know how to program using Python to use the software.   Once configured, as described in the next paragraph, the software is simply run by running each of four scripts at the command line (e.g. in Windows cmd.exe or PowerShell, or a terminal prompt on MacOSX or Linux), followed by the name of a configured city or region: 1) study region setup; 2) neighbourhood analysis; 3) aggregation; 4) generate reports.</p>
<p>For example, to set up a study region for analysis using the parameters (e.g. locations of data and some city details), the following is entered (‘city_name’ can be substituted for a city’s configured codename like “valencia” or “hong_kong”):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python 01_study_region_setup.py city_name</span><br></pre></td></tr></table></figure>

<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>The software can be configured for new cities or regions of interest by modifying text files that use the YAML format.  This basically consists of a list of bullet points (keys) within which are nested associated values.  Our software reads in the main bullet point keys from the software, along with the associated values that may have been modified by users, and then uses it to perform the requested analyses. Additional configuration of features of interest on OpenStreetMap can be configured by modifying CSV files containing similar key:value pairs that are used to classify or <a target="_blank" rel="noopener" href="https://wiki.openstreetmap.org/wiki/Tags">tag</a> data.</p>
<h1 id="Software-installation"><a href="#Software-installation" class="headerlink" title="Software installation"></a>Software installation</h1><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Once Git is installed, the software may be retrieved by cloning this repository:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/global-healthy-liveable-cities/global-indicators.git`</span><br></pre></td></tr></table></figure>

<p>Once cloned, you can run <code>git pull</code> to ensure you have the latest version of the software as required.</p>
<p>Once Docker is installed and running, it can be used to retrieve or update and then launch containers for the spatial database (PostgreSQL with PostGIS and pgRouting) and the Global Indicators software environment, by running the following from a linux (e.g. Ubuntu 20.04) command prompt:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ./global-indicators.sh</span><br></pre></td></tr></table></figure>

<p>This runs a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shell_script">shell script</a> containing a series of commands, which may be alternatively entered manually:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker pull pgrouting/pgrouting</span><br><span class="line">docker run --name=postgis -d -e POSTGRES_PASSWORD=ghscic -p 5433:5432 --restart=unless-stopped --volume=/var/lib/postgis:/postgresql/13/main pgrouting/pgrouting</span><br><span class="line">docker pull globalhealthyliveablecities/global-indicators:latest</span><br><span class="line">docker run --<span class="built_in">rm</span> -it --shm-size=2g --net=host -v <span class="string">&quot;<span class="variable">$PWD</span>&quot;</span>:/home/ghsci/work globalhealthyliveablecities/global-indicators /bin/bash</span><br></pre></td></tr></table></figure>

<p>This will launch the software in the root directory of the project, with the spatial database running as persistent storage in the background.  Change directory to the <code>process</code> folder to run the processing scripts:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> process</span><br></pre></td></tr></table></figure>

<p>The time taken to run analyses will vary depending on city size and density of features, and the specification of the computer running analyses.  A minimum of 8GB of RAM is recommended; in general, the more RAM and processors available, the better.  It is possible that lower specification machines will be able to perform analyses of smaller urban regions.</p>
<p>In general, the main task is data sourcing and configuration of the region(s) of interest.</p>
<h1 id="0-Configuration"><a href="#0-Configuration" class="headerlink" title="0. Configuration"></a>0. Configuration</h1><p>Before commencing analysis, you will need to generate and modify the configuration files using a text editor.  These can be initialised from the provided templates by running the following:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python 00_create_project_configuration_files.py</span><br></pre></td></tr></table></figure>

<p>The following configuration files will then be located in the <code>process/configuration</code> folder, and may be be edited in a text editor (or in a spreadsheet editor such as Excel for the CSV file) to add and customise analysis for new regions:</p>
<ul>
<li>config.yml (overall project configuration)</li>
<li>datasets.yml (defines datasets and metadata for OpenStreetMap and population, which can be referenced by regions)</li>
<li>regions.yml (region specific details, including which datasets used - eg cities from a particular region could share common excerpts of population and OpenStreetMap, potentially)</li>
<li>indicators.yml (some aspects of indicators calculated can be modified here, although this isn’t necessary; currently this is set up for our core indicators)</li>
<li>osm_destinations.csv (a table of key pair tags that collectively identify the kinds of destinations to be evaluated for accessibility)</li>
<li>osm_open_space.yml (definitions for identifying areas of open space using OpenStreetMap)</li>
</ul>
<p>The datasets and regions configuration files are the main ones that will require customisation to process new regions.</p>
<p>Optionally, projects can be configured to:</p>
<ul>
<li>analyse <a target="_blank" rel="noopener" href="https://database.mobilitydata.org/">GTFS feed data</a> for evaluating accessibility to regularly serviced public transport</li>
<li>use custom sets of OpenStreetMap tags for identifying destinations (see <a target="_blank" rel="noopener" href="https://taginfo.openstreetmap.org/">OpenStreetMap TagInfo</a> and region-specific tagging guidelines to inform relevant synonyms for points of interest)</li>
<li>use custom destination data (a path to CSV with coordinates for points of interest for different destination categories can be configured in <code>process/configuration/regions.yml</code>)</li>
</ul>
<h2 id="Project"><a href="#Project" class="headerlink" title="Project"></a>Project</h2><p>The project itself is configured by editing the config.yml text file.  The default configuration is given and explained below.</p>
<details>
  <summary>
    Click to view project configuration template details
  </summary>
  
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">project:</span><br><span class="line">    units: m</span><br><span class="line">    # Units used by the coordinate reference system</span><br><span class="line">    units_full: metres</span><br><span class="line">    # Full name for the units</span><br><span class="line">    study_buffer: 1600</span><br><span class="line">    # Study region buffer, to account for edge effects</span><br><span class="line">    chunk_size: 500</span><br><span class="line">    # when doing network analyses, data is processed in chunks</span><br><span class="line">    # By reducing the chunk size (eg 500 instead of 1000) you can avoid memory errors on computers with less memory (eg a laptop with 8Gb ram)</span><br><span class="line">    # Specifically, this can be useful if you notice that the Docker process has been &#x27;Killed&#x27; when running the neighbourhood analysis script.</span><br><span class="line">    multiprocessing: 6</span><br><span class="line">    # Number of processors to use in multiprocessing scripts, if implemented</span><br><span class="line">    default_locale: None</span><br><span class="line">    # an optional default study region as defined in regions.yml, useful for debugging</span><br><span class="line">sql:</span><br><span class="line">    admin_db: postgres</span><br><span class="line">    # SQL settings to connect to Postgresql+Postgis Docker container</span><br><span class="line">    db_host: gateway.docker.internal</span><br><span class="line">    db_port: 5433</span><br><span class="line">    db_user: postgres</span><br><span class="line">    db_pwd: ghscic</span><br><span class="line">sample_points:</span><br><span class="line">    points_id: location_id</span><br><span class="line">    # sampling points unique id</span><br><span class="line">    points: sampling_points</span><br><span class="line">    # name of point data locations used for sampling</span><br><span class="line">    point_sampling_interval: 30</span><br><span class="line">    # interval in metres along which network is to be sampled</span><br><span class="line">network_analysis:</span><br><span class="line">    pedestrian: |-</span><br><span class="line">         [&quot;highway&quot;]</span><br><span class="line">         [&quot;area&quot;!~&quot;yes&quot;]</span><br><span class="line">         [&quot;highway&quot;!~&quot;motor|proposed|construction|abandoned|platform|raceway&quot;]</span><br><span class="line">         [&quot;foot&quot;!~&quot;no&quot;]</span><br><span class="line">         [&quot;service&quot;!~&quot;private&quot;]</span><br><span class="line">         [&quot;access&quot;!~&quot;private&quot;]</span><br><span class="line">    # query used for custom network in OSMnx</span><br><span class="line">    neighbourhood_distance: 1000</span><br><span class="line">    # sausage buffer network size  -- in units specified above</span><br><span class="line">    accessibility_distance: 500</span><br><span class="line">    # distance within which to evaluate access</span><br><span class="line">    soft_threshold_slope: 5</span><br><span class="line">    # For scaling binary cutoffs using a smooth transition; this parameter adjusts slope k of the transition</span><br><span class="line">documentation:</span><br><span class="line">    authors: Global Healthy Liveable Cities Indicator Study Collaboration</span><br><span class="line">    # Authors of project</span><br><span class="line">    version: 1.2</span><br><span class="line">    # Version of documentation</span><br><span class="line">    default_interactive_map: na</span><br><span class="line">    # The default first map shown in &#x27;interactive maps&#x27; section</span><br><span class="line">points_of_interest:</span><br><span class="line">    destination_list: [supermarket_osm, bakery_osm, meat_seafood_osm, fruit_veg_osm, deli_osm, convenience_osm, petrolstation_osm, newsagent_osm, market_osm, pt_any]</span><br><span class="line">    osm_destination_definitions: process/configuration/osm_destination_definitions.csv</span><br></pre></td></tr></table></figure>
</details>

<h2 id="Regions"><a href="#Regions" class="headerlink" title="Regions"></a>Regions</h2><p>New regions can be added or their analysis modified by adding to and editing the regions.yml file, in conjunction with the datasets.yml file.</p>
<details>
  <summary>
    Click to view region configuration template details
  </summary>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">description:</span><br><span class="line">    full_locale: | </span><br><span class="line">        Full study region name</span><br><span class="line">    year: |</span><br><span class="line">        Target year for analysis</span><br><span class="line">    region: |</span><br><span class="line">        Two character country code (ISO3166 Alpha-2 code)</span><br><span class="line">    country: |</span><br><span class="line">        Fully country name</span><br><span class="line">    continent: |</span><br><span class="line">        Continent name</span><br><span class="line">    utm: |</span><br><span class="line">        &#x27;UTM grid if EPSG code is not known (used to manually derive EPSG code: 326** is for Northern Hemisphere, 327** is for Southern Hemisphere)&#x27;</span><br><span class="line">    crs_name: |</span><br><span class="line">        name of the coordinate reference system (CRS; eg WGS84)</span><br><span class="line">    crs_standard: |</span><br><span class="line">        acronym of the standard catalogue defining this CRS (eg. EPSG)</span><br><span class="line">    crs_srid: |</span><br><span class="line">        spatial reference identifier (SRID) integer that identifies this CRS (eg 4326) according to the standard crs_standard</span><br><span class="line">    area_data: |</span><br><span class="line">        Region boundary data (path relative to project directory, or GHS:variable=&#x27;value&#x27;)</span><br><span class="line">    area_data_source: |</span><br><span class="line">        The name of the provider of this data</span><br><span class="line">    area_data_source_url: |</span><br><span class="line">        URL for the source dataset, or its provider</span><br><span class="line">    area_data_licence: |</span><br><span class="line">        Licence for the data</span><br><span class="line">    area_data_licence_url: |</span><br><span class="line">        URL for the data licence</span><br><span class="line">    not_urban_intersection: |</span><br><span class="line">        If the GHS urban instersection is not to be used</span><br><span class="line">    note: |</span><br><span class="line">        Notes for this region</span><br><span class="line">    OpenStreetMap: |</span><br><span class="line">        the OpenStreetMap record in datasets.yml to be used for this region</span><br><span class="line">    osmnx_retain_all: |</span><br><span class="line">        If false, only retain main connected network when retrieving OSM roads</span><br><span class="line">    population: |</span><br><span class="line">        the population record in datasets.yml to be used for this region</span><br><span class="line">    network_not_using_buffered_region: |</span><br><span class="line">        Instead of using buffered study region, use regular study region for excerpting network from OSM.  This may allow for looping over true islands to extract individual networks (eg. Hong Kong), which may not be possible with the buffered region (which results in only retaining larget network segment)</span><br><span class="line">    network_polygon_iteration: |</span><br><span class="line">        &#x27;Iterate over polygons for network retrieval, and then combine &#x27;</span><br><span class="line">    network_connection_threshold: |</span><br><span class="line">        &#x27;Minimum distance to retain &#x27;</span><br><span class="line">    intersection_tolerance: |</span><br><span class="line">        Tolerance in metres for cleaning intersections.  This is an important methodological choice, and the chosen parameter should be robust to a variety of network topologies in the city being studied.  See https://github.com/gboeing/osmnx-examples/blob/main/notebooks/04-simplify-graph-consolidate-nodes.ipynb.</span><br><span class="line">    custom_destinations: |</span><br><span class="line">        Details of custom destinations to use, in addition to those from OSM (optional, as required; else, leave blank) file name (located in study region folder), category plain name field, category full name field, Y coordinate, X coordinate, EPSG number, attribution</span><br><span class="line">    covariate_data: |</span><br><span class="line">        GHS or other linkage of covariate data (GHS:variable=&#x27;value&#x27;, or path:variable=&#x27;value&#x27; for a dataset with equivalently named fields defined in project parameters for air_pollution_covariates)</span><br><span class="line">    country_gdp:</span><br><span class="line">        classification: |</span><br><span class="line">            Country GDP classification (e.g. lower-middle)</span><br><span class="line">        reference: |</span><br><span class="line">            Citation for the GDP classification</span><br><span class="line">    gtfs_feeds: | </span><br><span class="line">        Details for city specific parent folder (within GTFS data dir defined in config.yml) and feed-specific unzipped sub-folders containing GTFS feed data.  For each feed, the data provider, year, start and end dates to use, and mapping of modes are specified (only required if feed does not conform to the GTFS specification https://developers.google.com/transit/gtfs/reference). For cities with no GTFS feeds identified, this may be left blank.</span><br><span class="line">    policy_review: |</span><br><span class="line">        Optional path to results of policy indicator review for inclusion in generated reports</span><br></pre></td></tr></table></figure>
</details>

<h2 id="Datasets"><a href="#Datasets" class="headerlink" title="Datasets"></a>Datasets</h2><p><em>To be explained further</em></p>
<p>The required datasets are:</p>
<ul>
<li>an OpenStreetMap .pbf file with coverage of the region (and time) of interest; this could be an historical planet file from <a target="_blank" rel="noopener" href="https://planet.openstreetmap.org/pbf/">https://planet.openstreetmap.org/pbf/</a>, or a region-specific excerpt from <a target="_blank" rel="noopener" href="https://download.geofabrik.de/">https://download.geofabrik.de/</a></li>
<li><a target="_blank" rel="noopener" href="https://ghsl.jrc.ec.europa.eu/download.php">Global Human Settlements Layer</a> Urban Centres database and&#x2F;or administrative boundary for urban region of interest<ul>
<li>the GHSL urban centres database may be saved and extracted to a folder like <code>process/data/GHS/GHS_STAT_UCDB2015MT_GLOBE_R2019A</code>, with this path recorded in the <code>urban_region</code> section of <code>process/configuration/datasets.yml</code>.</li>
<li>Where possible and appropriate, we recommend using the intersection of an administrative boundary for a city’s metropolitan area with the empirically identified ‘urban area’ from the GHSL data.  The location of a geopackage containing an administrative boundary for the urban region of interest may be recorded under the <code>area_data</code> field for that region in <code>process/configuration/regions.yml</code>.   For example, “<code>area_data: ./data/boundaries.gpkg:Ghent</code>“ identifies the boundaries.gpkg geopackage as having a layer named ‘Ghent’ corresponding to the configured Ghent study region.</li>
</ul>
</li>
<li>Population distribution grid data with coverage of urban region of interest<ul>
<li><p>[GHS population grid (R2022)] (<a target="_blank" rel="noopener" href="https://ghsl.jrc.ec.europa.eu/download.php?ds=pop">https://ghsl.jrc.ec.europa.eu/download.php?ds=pop</a>) is recommended (for example, the 2020 Molleweide 100m grid tiles corresponding to your area of interest, with these saved and extracted to a folder like  <code>process/data/GHS/R2022A/GHS_POP_P2030_GLOBE_R2022A_54009_100_V1_0</code>, which may be specified in <code>process/configuration/datasets.yml</code>.</p>
<ul>
<li>required:<ul>
<li>OpenStreetMap</li>
<li>Population grid (Global Human Settlements Layer r2022a or later recommended)</li>
</ul>
</li>
<li>optional<ul>
<li>Urban region <ul>
<li>Global Human Settlements Layer Urban Centres Database recommended)<ul>
<li>this also contains additional covariates for urban areas that may be optionally linked</li>
</ul>
</li>
</ul>
</li>
<li>GTFS (transport schedule data)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<details>
  <summary>
    Click to view dataset configuration details
  </summary>
  
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">gtfs:</span><br><span class="line">    data_dir: path to GTFS feed folder, relative to project directory.  (Region-specific GTFS folders and settings are defined in regions.yml)</span><br><span class="line">    headway: name of layer to save GTFS headway statistic in</span><br><span class="line">    default_modes: an optional modification of mode route types and agency ID if these don&#x27;t conform to the GTFS standard, as per https://developers.google.com/transit/gtfs/reference</span><br><span class="line">    analysis_period: a list with start and end time string of analysis (hh:mm:ss; e.g. [&#x27;07:00:00&#x27;, &#x27;19:00:00&#x27;])</span><br><span class="line">    headway_intervals: a list of intervals to theoretically loop over (currently these are hard coded though; so this variable is not used)</span><br><span class="line">OpenStreetMap:</span><br><span class="line">    osm_data: Downloaded OpenStreetMap (OSM) data, from https://planet.openstreetmap.org/ or https://download.geofabrik.de/</span><br><span class="line">    osm_date: Date at which OSM download was current (yyyymmdd)</span><br><span class="line">    osmnx_retain_all: keep only main connected network, or retain disconnected sub-networks</span><br><span class="line">population:</span><br><span class="line">    dataset_alias_1:</span><br><span class="line">        pop_min_threshold: urban sample points intersecting grid cells with estimated population less than this will be excluded from analysis</span><br><span class="line">        name_f: &quot;Global Human Settlements population data: 2015, WGS84 (EU JRC, 2019)&quot;</span><br><span class="line">        data_name_short: GHS-POP</span><br><span class="line">        data_dir: path to data, relative to project directory</span><br><span class="line">        crs_name: name of the coordinate reference system (CRS; eg WGS84)</span><br><span class="line">        crs_standard: acronym of the standard catalogue defining this CRS (eg. EPSG)</span><br><span class="line">        crs_srid: spatial reference identifier (SRID) integer that identifies this CRS (eg 4326) according to the standard crs_standard</span><br><span class="line">        source_url: https://ghsl.jrc.ec.europa.eu/ghs_pop2019.php</span><br><span class="line">        date_acquired: yyyymmdd</span><br><span class="line">        year_published: yyyy</span><br><span class="line">        year_target: yyyy</span><br><span class="line">        provider: name of the data provider</span><br><span class="line">        licence: licence terms (eg CC BY 4.0)</span><br><span class="line">        licence_url: URL for licence (eg https://creativecommons.org/licenses/by/4.0/deed.ast)</span><br><span class="line">        resolution: resolution (eg 9 arcsec; 30 arcsec; 100m; et cetera)</span><br><span class="line">        raster_band: band of the raster containing relevant data (eg 1)</span><br><span class="line">        raster_nodata: data value representing &#x27;no data&#x27; (eg -200)  </span><br></pre></td></tr></table></figure>
</details>

<h2 id="Indicators"><a href="#Indicators" class="headerlink" title="Indicators"></a>Indicators</h2><p>Indicators are defined using the indicators.yml file, the defaults of which are provided below.</p>
<details>
  <summary>
    Click to view indicator configuration details
  </summary>
  
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line">nearest_node_analyses:</span><br><span class="line">    Destinations:</span><br><span class="line">        categories:</span><br><span class="line">        - fresh_food_market</span><br><span class="line">        - convenience</span><br><span class="line">        - pt_any</span><br><span class="line">        category_field: dest_name</span><br><span class="line">        filter_field: null</span><br><span class="line">        filter_iterations: null</span><br><span class="line">        geopackage: &#x27;&#123;gpkg&#125;&#x27;</span><br><span class="line">        layers:</span><br><span class="line">        - destinations</span><br><span class="line">        notes: The initial value for pt_any will be based on analysis using OSM data;</span><br><span class="line">            this will later be copied to a seperate pt_any_osm result, and the final pt_any</span><br><span class="line">            variable will be based on the &#x27;best result&#x27; out of analysis using GTFS data</span><br><span class="line">            (where available) and OSM data</span><br><span class="line">        output_names:</span><br><span class="line">        - fresh_food_market</span><br><span class="line">        - convenience</span><br><span class="line">        - pt_osm_any</span><br><span class="line">    Public open space:</span><br><span class="line">        categories: []</span><br><span class="line">        category_field: null</span><br><span class="line">        filter_field: null</span><br><span class="line">        filter_iterations: null</span><br><span class="line">        geopackage: &#x27;&#123;gpkg&#125;&#x27;</span><br><span class="line">        layers:</span><br><span class="line">        - aos_public_any_nodes_30m_line</span><br><span class="line">        - aos_public_large_nodes_30m_line</span><br><span class="line">        notes: null</span><br><span class="line">        output_names:</span><br><span class="line">        - public_open_space_any</span><br><span class="line">        - public_open_space_large</span><br><span class="line">    Public transport (GTFS):</span><br><span class="line">        categories: null</span><br><span class="line">        category_field: []</span><br><span class="line">        filter_field: headway</span><br><span class="line">        filter_iterations:</span><br><span class="line">        - &#x27;&gt;=0&#x27;</span><br><span class="line">        - &lt;=30</span><br><span class="line">        - &lt;=20</span><br><span class="line">        geopackage: &#x27;&#123;gpkg&#125;&#x27;</span><br><span class="line">        layers:</span><br><span class="line">        - pt_stops_headway</span><br><span class="line">        notes: null</span><br><span class="line">        output_names:</span><br><span class="line">        - pt_gtfs_any</span><br><span class="line">        - pt_gtfs_freq_30</span><br><span class="line">        - pt_gtfs_freq_20</span><br><span class="line">sample_point_analyses:</span><br><span class="line">    Best PT (any) access score:</span><br><span class="line">        sp_access_pt_any_score:</span><br><span class="line">            axis: 1</span><br><span class="line">            columns:</span><br><span class="line">            - sp_access_pt_osm_any_score</span><br><span class="line">            - sp_access_pt_gtfs_any_score</span><br><span class="line">            formula: max</span><br><span class="line">    Daily living score:</span><br><span class="line">        sp_daily_living_score:</span><br><span class="line">            axis: 1</span><br><span class="line">            columns:</span><br><span class="line">            - sp_access_fresh_food_market_score</span><br><span class="line">            - sp_access_convenience_score</span><br><span class="line">            - sp_access_pt_any_score</span><br><span class="line">            formula: sum</span><br><span class="line">    Walkability index:</span><br><span class="line">        sp_walkability_index:</span><br><span class="line">            axis: 0</span><br><span class="line">            columns:</span><br><span class="line">            - sp_daily_living_score</span><br><span class="line">            - sp_local_nh_avg_pop_density</span><br><span class="line">            - sp_local_nh_avg_intersection_density</span><br><span class="line">            formula: sum_of_z_scores</span><br><span class="line">output:</span><br><span class="line">    basic_attributes: </span><br><span class="line">        - grid_id</span><br><span class="line">        - study_region</span><br><span class="line">        - area_sqkm</span><br><span class="line">        - pop_est</span><br><span class="line">        - pop_per_sqkm</span><br><span class="line">        - intersection_count</span><br><span class="line">        - intersections_per_sqkm</span><br><span class="line">        - urban_sample_point_count</span><br><span class="line">    sample_point_variables: </span><br><span class="line">        - sp_access_fresh_food_market_score</span><br><span class="line">        - sp_access_convenience_score</span><br><span class="line">        - sp_access_pt_osm_any_score</span><br><span class="line">        - sp_access_public_open_space_any_score</span><br><span class="line">        - sp_access_public_open_space_large_score</span><br><span class="line">        - sp_access_pt_gtfs_any_score</span><br><span class="line">        - sp_access_pt_gtfs_freq_30_score</span><br><span class="line">        - sp_access_pt_gtfs_freq_20_score</span><br><span class="line">        - sp_access_pt_any_score</span><br><span class="line">        - sp_local_nh_avg_pop_density</span><br><span class="line">        - sp_local_nh_avg_intersection_density</span><br><span class="line">        - sp_daily_living_score</span><br><span class="line">        - sp_walkability_index</span><br><span class="line">    neighbourhood_variables: </span><br><span class="line">        - pct_access_500m_fresh_food_market_score</span><br><span class="line">        - pct_access_500m_convenience_score</span><br><span class="line">        - pct_access_500m_pt_osm_any_score</span><br><span class="line">        - pct_access_500m_public_open_space_any_score</span><br><span class="line">        - pct_access_500m_public_open_space_large_score</span><br><span class="line">        - pct_access_500m_pt_gtfs_any_score</span><br><span class="line">        - pct_access_500m_pt_gtfs_freq_30_score</span><br><span class="line">        - pct_access_500m_pt_gtfs_freq_20_score</span><br><span class="line">        - pct_access_500m_pt_any_score</span><br><span class="line">        - local_nh_population_density</span><br><span class="line">        - local_nh_intersection_density</span><br><span class="line">        - local_daily_living</span><br><span class="line">        - local_walkability</span><br><span class="line">    city_variables: </span><br><span class="line">        - pop_pct_access_500m_fresh_food_market_score</span><br><span class="line">        - pop_pct_access_500m_convenience_score</span><br><span class="line">        - pop_pct_access_500m_pt_osm_any_score</span><br><span class="line">        - pop_pct_access_500m_public_open_space_any_score</span><br><span class="line">        - pop_pct_access_500m_public_open_space_large_score</span><br><span class="line">        - pop_pct_access_500m_pt_gtfs_any_score</span><br><span class="line">        - pop_pct_access_500m_pt_gtfs_freq_30_score</span><br><span class="line">        - pop_pct_access_500m_pt_gtfs_freq_20_score</span><br><span class="line">        - pop_pct_access_500m_pt_any_score</span><br><span class="line">        - pop_nh_pop_density</span><br><span class="line">        - pop_nh_intersection_density</span><br><span class="line">        - pop_daily_living</span><br><span class="line">        - pop_walkability</span><br><span class="line">    extra_unweighted_vars: </span><br><span class="line">        - local_nh_population_density</span><br><span class="line">        - local_nh_intersection_density</span><br><span class="line">        - local_daily_living</span><br><span class="line">        - local_walkability</span><br><span class="line">report:</span><br><span class="line">    accessibility:</span><br><span class="line">        pop_pct_access_500m_fresh_food_market_score: </span><br><span class="line">            title: Food market</span><br><span class="line">            ghscic_reference: </span><br><span class="line">                p25: 19.66</span><br><span class="line">                p50: 35.18</span><br><span class="line">                p75: 50.65</span><br><span class="line">        pop_pct_access_500m_convenience_score:</span><br><span class="line">            title: Convenience store</span><br><span class="line">            ghscic_reference: </span><br><span class="line">                p25: 28.66</span><br><span class="line">                p50: 40.09</span><br><span class="line">                p75: 48.15</span><br><span class="line">        pop_pct_access_500m_public_open_space_any_score:</span><br><span class="line">            title: Any public open space</span><br><span class="line">            ghscic_reference: </span><br><span class="line">                p25: 59.22</span><br><span class="line">                p50: 84.94</span><br><span class="line">                p75: 90.07</span><br><span class="line">        pop_pct_access_500m_public_open_space_large_score:</span><br><span class="line">            title: Large public open space</span><br><span class="line">            ghscic_reference: </span><br><span class="line">                p25: 24.60</span><br><span class="line">                p50: 46.75</span><br><span class="line">                p75: 62.81</span><br><span class="line">        pop_pct_access_500m_pt_any_score:</span><br><span class="line">            title: Public transport stop</span><br><span class="line">            ghscic_reference: </span><br><span class="line">                p25: 63.15</span><br><span class="line">                p50: 86.45</span><br><span class="line">                p75: 91.40</span><br><span class="line">        pop_pct_access_500m_pt_gtfs_freq_20_score:</span><br><span class="line">            title: Public transport with regular service</span><br><span class="line">            ghscic_reference: </span><br><span class="line">                p25: 38.71</span><br><span class="line">                p50: 56.71</span><br><span class="line">                p75: 76.16</span><br><span class="line">    thresholds:</span><br><span class="line">        &quot;Mean 1000 m neighbourhood population per km\xB2&quot;:</span><br><span class="line">            field: local_nh_population_density</span><br><span class="line">            scale: log</span><br><span class="line">            title: &quot;Neighbourhood population density (per km\xB2)&quot;</span><br><span class="line">            criteria: 5677</span><br><span class="line">            relationship: &quot;&gt;=&quot;</span><br><span class="line">        &quot;Mean 1000 m neighbourhood street intersections per km\xB2&quot;:</span><br><span class="line">            field: local_nh_intersection_density</span><br><span class="line">            scale: log</span><br><span class="line">            title: &quot;Neighbourhood intersection density (per km\xB2)&quot;</span><br><span class="line">            criteria: 106</span><br><span class="line">            relationship: &quot;&gt;=&quot;</span><br><span class="line">    walkability:</span><br><span class="line">        ghscic_walkability_reference: -0.447735</span><br><span class="line">        ghscic_reference:</span><br><span class="line">            local_nh_population_density: &#123;&#x27;mean&#x27;: 11093.1, &#x27;sd&#x27;: 13637.9&#125;</span><br><span class="line">            local_nh_intersection_density: &#123;&#x27;mean&#x27;: 98.44, &#x27;sd&#x27;: 36.96&#125;</span><br><span class="line">            local_daily_living: &#123;&#x27;mean&#x27;: 1.028, &#x27;sd&#x27;: 0.915&#125;</span><br><span class="line">            # These are mean and sd for local neighbourhood statistics from 25 city analysis dated 21 June 2021</span><br><span class="line">            # As published in Lancet Global Health series on Urban Design, Transport and Health</span><br><span class="line">            # Their use here, for now, is as an empirical reference for comparison purposes</span><br><span class="line">    spatial_distribution_figures:</span><br><span class="line">        all_cities_walkability:</span><br><span class="line">            label: &#x27;&#123;phrases[Neighbourhood walkability relative to 25 global cities]&#125;&#x27;</span><br><span class="line">            outfile: &#x27;all_cities_walkability_&#123;language&#125;.jpg&#x27;</span><br><span class="line">            range: [-6,6]</span><br><span class="line">            tick_labels: [&#x27;&#123;phrases[Low]&#125;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#123;phrases[Average]&#125;&#x27;,&#x27;&#x27;,&#x27;&#x27;,&#x27;&#123;phrases[High]&#125;&#x27;]</span><br><span class="line">        pct_access_500m_pt_gtfs_freq_20_score: </span><br><span class="line">            label: &#x27;&#123;phrases[Percentage of population with access to public transport with service frequency of 20 minutes or less]&#125;&#x27;</span><br><span class="line">            outfile: &#x27;pct_access_500m_pt_&#123;language&#125;.jpg&#x27;</span><br><span class="line">            range: [-0,100]</span><br><span class="line">            tick_labels: null</span><br><span class="line">        pct_access_500m_public_open_space_large_score: </span><br><span class="line">            label: &#x27;&#123;phrases[Percentage of population with access to public open space of area 1.5 hectares or larger]&#125;&#x27;</span><br><span class="line">            outfile: &#x27;pct_access_500m_public_open_space_large_score_&#123;language&#125;.jpg&#x27;</span><br><span class="line">            range: [-0,100]</span><br><span class="line">            tick_labels: null</span><br><span class="line">    policy:</span><br><span class="line">        analyses:</span><br><span class="line">          - Presence</span><br><span class="line">          - Checklist</span><br><span class="line">          - POS</span><br><span class="line">          - PT</span><br><span class="line">        comparisons:</span><br><span class="line">            presence: 15.5</span><br><span class="line">            quality: 25.5</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</details>

<h2 id="Policies"><a href="#Policies" class="headerlink" title="Policies"></a>Policies</h2><ul>
<li>a checklist of policies for reporting purposes</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-   Policy: Name of the policy</span><br><span class="line">    Figure: Relates to the Figures in the paper by Lowe et al. (2022) -- 1 (presence) or 2 (quality)</span><br><span class="line">    Display: Checklist</span><br><span class="line">    Label: A short name for this policy for presentation purposes</span><br><span class="line">    weight: Weight from 0 to 1, for use when quantifying scores</span><br><span class="line">    quality_score: Whether the policy is evaluated for quality</span><br></pre></td></tr></table></figure>

<h1 id="1-Set-up-study-regions"><a href="#1-Set-up-study-regions" class="headerlink" title="1. Set up study regions"></a>1. Set up study regions</h1><p>This step creates a database for the city and processes the resources required for analyses, as defined in <code>configuration/config.yml</code> (project parameters), <code>configuration/regions.yml</code> (region parameters), <code>configuration/osm_destination_definitions.csv</code> (OpenStreetMap destination definitions), and <code>configuration/osm_open_space.yml</code> (OpenStreetMap open space definitions).</p>
<p>To view the code names for configured cities, you can run the script without a city name: <code>python 01_study_region_setup.py</code>.  This displays the list of names for currently configured cities, each of which can be entered as arguments when running this script (city names are lower case, with underscores instead of spaces).</p>
<p>To run the script, enter the following:</p>
<p><code>python 01_study_region_setup.py [CITY CODE NAME]</code></p>
<p>The following preparatory steps will be run for the specified region:</p>
<ul>
<li>Create database for region</li>
<li>Create study region boundaries</li>
<li>boundary for region of interest (ie. urban and&#x2F;or policy relevant administrative extent; pending configuration)</li>
<li>buffered boundary for data retrieval and analysis to mitigate risk of edge effects</li>
<li>Extract OpenStreetMap feature data for region</li>
<li>Derive routable pedestrian network and intersections data</li>
<li>Set up grid with population estimates for region</li>
<li>Compile destinations using OpenStreetMap and&#x2F;or custom data</li>
<li>Derive a dataset of areas of open space</li>
<li>Currently focused on ‘public open space’</li>
<li>It is planned to broaden this to include more flexibility in analysis (green space, blue space, etc)</li>
<li>Pre-compute distance relationships for nodes and destinations to facilitate subsequent network analysis</li>
<li>Summarise destinations</li>
<li>Link urban covariates</li>
<li>Analyse service frequency for public transport stops (optional; using GTFS data)</li>
</ul>
<p><em>To be explained further</em></p>
<h1 id="2-Analyse-neighbourhoods"><a href="#2-Analyse-neighbourhoods" class="headerlink" title="2. Analyse neighbourhoods"></a>2. Analyse neighbourhoods</h1><p>This step in the process performs local neighbourhood analysis for sample points across a city, creating urban indicators as defined in <code>indicators.yml</code>.  Similar to the above step, it is run:</p>
<p> <code>python 02_neighbourhood_analysis.py [CITY CODE NAME]</code></p>
<p>The following neighbourhood analyses are conducted:</p>
<ul>
<li>Access to amenities (food market, convenience store, open space typologies, public transport typologies)</li>
<li>Daily Living score for access to amenities</li>
<li>Walkability index<ul>
<li>within city<ul>
<li>A walkability index is calculated as a sum of standard scores (z-scores) for population density, street connectivity and daily living score for access to amenities</li>
</ul>
</li>
<li>between cities<ul>
<li>In addition to the within-city walkability index, a reference walkability index is also calculated.  Using the default configuration this draw upon 25-city study results to make comparisons using sub-indicator mean and standard deviation to calculate z-scores, which are then summed.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="3-Aggregate-indicators"><a href="#3-Aggregate-indicators" class="headerlink" title="3. Aggregate indicators"></a>3. Aggregate indicators</h1><p>This step aggregates spatial urban indicator summaries for a small area grid (corresponding to the resolution of the input population grid) and overall city, exported as CSV (without geometry) and as layers to the geopackage file in the <code>data/study_region/[study region name]</code> folder.</p>
<p>It is run by entering the following:</p>
<p><code>python 03_aggregation.py [CITY CODE NAME]</code></p>
<ul>
<li>grid area estimates</li>
<li>overall city summary estimates<ul>
<li>distinction between spatial and population-weighted estimates</li>
</ul>
</li>
</ul>
<h1 id="4-Generate-reports"><a href="#4-Generate-reports" class="headerlink" title="4. Generate reports"></a>4. Generate reports</h1><p>This script is used to generate reports, optionally in multiple languages, for processed cities.  It integrates the functionality previously located in the repository <a target="_blank" rel="noopener" href="https://github.com/global-healthy-liveable-cities/global_scorecards">https://github.com/global-healthy-liveable-cities/global_scorecards</a>, which was used to generate <a target="_blank" rel="noopener" href="https://doi.org/10.25439/rmt.c.6012649">city reports</a> for our 25 city study across 16 languages.  These can be configured using the configuration file _report_configuration.xlsx in conjunction with the regions, indicators and policies configuration files.</p>
<p>This is run by entering:</p>
<p><code>python 04_generate_reports.py --city [CITY CODE NAME]</code></p>
<p>At the time of writing (23 February 2023) the included report template corresponds to that used in the 25 city, outputting a PDF report of policy and spatial indicator results, designed for web distribution.  Further templates are planned to support high quality print output, and optionally select policy and&#x2F;or spatial indicators for reporting.</p>
<p>In addition it is planned that validation reporting with descriptive and analytical summaries will be incorporated.</p>
<h1 id="Validation"><a href="#Validation" class="headerlink" title="Validation"></a>Validation</h1><p>Currently, validation is to be carried out by users independent of the process.  Previous validation code used to support our 25 city study’s reporting and quantitative analyses requires updating for use in the 1000 City Challenge context.  Along with further development of documentation and training materials, this is a priority for the team.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/2023/02/01/1000cities/">1000 Cities Challenge</a></li>
         
          <li><a href="/2023/02/01/indicators/">Indicators</a></li>
         
          <li><a href="/2023/02/01/software/">Analysis and reporting</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Background-primer"><span class="toc-number">1.</span> <span class="toc-text">Background primer</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Aim"><span class="toc-number">1.1.</span> <span class="toc-text">Aim</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage-in-brief"><span class="toc-number">1.2.</span> <span class="toc-text">Usage in brief</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Configuration"><span class="toc-number">1.3.</span> <span class="toc-text">Configuration</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Software-installation"><span class="toc-number">2.</span> <span class="toc-text">Software installation</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Installation"><span class="toc-number">2.1.</span> <span class="toc-text">Installation</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0-Configuration"><span class="toc-number">3.</span> <span class="toc-text">0. Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Project"><span class="toc-number">3.1.</span> <span class="toc-text">Project</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Regions"><span class="toc-number">3.2.</span> <span class="toc-text">Regions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Datasets"><span class="toc-number">3.3.</span> <span class="toc-text">Datasets</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Indicators"><span class="toc-number">3.4.</span> <span class="toc-text">Indicators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Policies"><span class="toc-number">3.5.</span> <span class="toc-text">Policies</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Set-up-study-regions"><span class="toc-number">4.</span> <span class="toc-text">1. Set up study regions</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Analyse-neighbourhoods"><span class="toc-number">5.</span> <span class="toc-text">2. Analyse neighbourhoods</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Aggregate-indicators"><span class="toc-number">6.</span> <span class="toc-text">3. Aggregate indicators</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Generate-reports"><span class="toc-number">7.</span> <span class="toc-text">4. Generate reports</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Validation"><span class="toc-number">8.</span> <span class="toc-text">Validation</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://global-healthy-liveable-cities.github.io/2023/02/01/software/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&text=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&is_video=false&description=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Global Healthy &amp; Sustinable City Indicators software&body=Check out this article: https://global-healthy-liveable-cities.github.io/2023/02/01/software/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&title=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&name=Global Healthy &amp; Sustinable City Indicators software&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://global-healthy-liveable-cities.github.io/2023/02/01/software/&t=Global Healthy &amp; Sustinable City Indicators software"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <p><p>
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2019-2023
    GHSCIC
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/2023/02/01/1000cities/">1000 Cities Challenge</a></li><!--
     --><!--
       --><li><a href="/2023/02/01/indicators/">Indicators</a></li><!--
     --><!--
       --><li><a href="/2023/02/01/software/">Analysis and reporting</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
